<!DOCTYPE html>
<html>

<head>
	<title>EWI Fingerings</title>
	<style>
		body {
			margin: 0;
		}
		scg {
			overflow: hidden;
		}
		.text {
			position: fixed;
			font-family: Verdana;
			font-size: 20px;
		}
		.stop-top {
			stop-color: #add8e6;  /* Light Blue */
    }

    .stop-bottom {
			stop-color: #f0fff0;  /* Very Light Green */
    }

    .filled {
			fill: url(#mainGradient);
    }

    .outlined {
			fill: none;
			stroke: url(#mainGradient);
			stroke-width: 4;
    }
	</style>
</head>

<body>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script type="text/javascript">
		var width = $(window).width(),
				height = $(window).height(),
				padding = 0;

		// Create svg
		var svg = d3.select("body").append("svg")
			.attr("width", width)
			.attr("height", height);

		// Create the svg:defs element and the main gradient definition.
    var svgDefs = svg.append('defs');

    var mainGradient = svgDefs.append('linearGradient')
			.attr("gradientTransform", "rotate(" + 100 + ")")
			.attr('id', 'mainGradient');

    // Create the stops of the main gradient. Each stop will be assigned
    // a class to style the stop using CSS.
    mainGradient.append('stop')
			.attr('class', 'stop-top')
			.attr('offset', '0');

    mainGradient.append('stop')
			.attr('class', 'stop-bottom')
			.attr('offset', '1');

		svg.append('rect')
			.classed('filled', true)
			.attr('x', padding)
			.attr('y', padding)
			.attr('width', width - 2 * padding)
			.attr('height', height - 2 * padding);

    // Use the gradient to set the shape fill, via CSS.
    // svg.append('rect')
		// 	.classed('filled', true)
		// 	.attr('x', padding)
		// 	.attr('y', padding)
		// 	.attr('width', (width / 2) - 1.5 * padding)
		// 	.attr('height', height - 2 * padding);
		//
    // // Use the gradient to set the shape stroke, via CSS.
    // svg.append('rect')
		// 	.classed('outlined', true)
		// 	.attr('x', width / 2 + padding / 2)
		// 	.attr('y', padding)
		// 	.attr('width', (width / 2) - 1.5 * padding)
		// 	.attr('height', height - 2 * padding);

		//there are 17 notes because it goes from Bb to D an octave above
		//there are 13 keys and its formated in binary for ease of input to the array
		//fingerings taken from patchmanmusic.com/EWIFingeringOneWatts.pdf
		var fingerings = [
			[//Bb
				1011010111011
			],
			[//B
				1011010111001
			],
			[//C
				1011000111001,
				1011010111010
			],
			[//Db
				1011000111010,
				1011010111000,
				1011100111001
			],
			[//D
				1011000111000,
				1011000110001,
				1011000101010,
				1011000011001,
				1011000111001
			],
			[//Eb
				1011000111100,
				1011100111000,
				1011000101000,
				1001010111000,
				1001000111010
			],
			[//E
				1011000110000,
				1011000011000,
				1001000111000,
				1011010100000,
				1011000010001,
				1001000110001
			],
			[//F
				1011000100000,
				1011000000001,
				1011000001000,
				1001000101000,
				1001000100001,
				1010000111000
			],
			[//Gb
				1011000010000,
				1001000110000,
				1011000000010,
				1011010000000
			],
			[//G
				1011000000000,
				1010000110000,
				1010000001000,
				1001000100000,
				1001000001000,
				1010000000001,
				0011000110000,
				1000000111000,
				0011000011000
			],
			[//Ab
				1011100000000,
				1011001000000,
				1011000000100,
				1001000010000,
				0011000001000,
				1010000100000,
				1010000010000,
				0011000100000
			],
			[//A
				1010000000000,
				1001000000000,
				1000000001000,
				1000000000001,
				0000000111000,
				0010000101000,
				0001000000001,
				0001000100000,
				0011000010000
			],
			[//Bb
				1100000000000,
				1000000100000,
				1000000010000,
				0011000000000,
				0000000101000,
				0000000011000,
				0000000000011,
				0000010000001,
				0010000001000,
				0001000010000,
				0010000110000
			],
			[//B
				1000000000000,
				0001000000000,
				0000000000001,
				0000000001000,
				0110000000000
			],
			[//C
				0010000000000,
				0000000100000,
				0000000010000,
				0000010000000,
				0000000000010
			],
			[//Db
				0000000000000,
				0000110000000
			],
			[//D
				0000001000000,
				0000100000000
			]
		]

		function convertFingeringToBoolArray(fInt) {
			var f = String(fInt);
			var boolArray = [];
			for (var i = 0; i < 13; i++) {
				if (f.charAt(0) === "0")
					boolArray[i] = false;
				else
					boolArray[i] = true;
				f = f.substring(1);
			}
			return boolArray;
		}
	</script>
</body>

</html>
